<?php $ajax=1;session_start();include('../includes/admin/f.php');$bdd=connect();/* *  original_html; the original text in the in-place editor container *  update_value; the new value of the text from the in-place editor *  element_id; the id attribute of the in-place editor   *  group_id; id of the group */if(isuser() AND isset($_POST['group_id']) AND isset($_POST['original_html']) AND isset($_POST['element_id']) AND isset($_POST['update_value']))	{	$group_id=(int) $_POST['group_id'];	$req=$bdd->query('SELECT * FROM `group` WHERE id='.$_POST['group_id'].' AND user_id='.$_SESSION['user_id']);	if($req->rowcount() != 0 OR isadmin())		{		if($_POST['element_id']=='name' AND (is_numeric($_POST['update_value']) OR empty($_POST['update_value'])))			{			echo $_POST['original_html'].'<script type="text/javascript">alert("Erreur : le nom de l\'objet doit contenir au moins une lettre !");</script>';			exit();			}		if(in_array($_POST['element_id'],array('name','descr','recit')))			{			$req=$bdd->prepare('UPDATE `group` SET '.$_POST['element_id'].'= ? WHERE id='.$_POST['group_id']);			$req->execute(array($_POST['update_value']));			echo secure::html($_POST['update_value']);			$_SESSION['cache_time']=time();			}		else{			echo $_POST['original_html'].'<script type="text/javascript">alert("Erreur lors de l\'opération !");</script>';			}		}	else{		echo $_POST['original_html'].'<script type="text/javascript">alert("Vous n\'avez pas le droit de faire cela !");</script>';		}	}else{	echo $_POST['original_html'].'<script type="text/javascript">alert("Erreur lors de l\'opération !");</script>';	}